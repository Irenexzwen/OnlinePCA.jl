using OnlinePCA
using ArgParse:
    ArgParseSettings, parse_args, @add_arg_table

# main
function main()
    parsed_args = common_parse_commandline()
    println("Parsed args:")
    for (arg,val) in parsed_args
        println("  $arg  =>  $val")
    end

    out = gd(input=parsed_args["input"],
        logscale=parsed_args["logscale"],
        pseudocount=parsed_args["pseudocount"],
        rowmeanlist=parsed_args["rowmeanlist"],
        colsumlist=parsed_args["colsumlist"],
        masklist=parsed_args["masklist"],
        dim=parsed_args["dim"],
        stepsize=parsed_args["stepsize"],
        numepoch=parsed_args["numepoch"],
        scheduling=parsed_args["scheduling"],
        g=parsed_args["g"],
        epsilon=parsed_args["epsilon"],
        logdir=parsed_args["logdir"])
    output(parsed_args["outdir"], out)
end

main()